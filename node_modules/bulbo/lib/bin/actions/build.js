'use strict';

var bulbo = require('../../');
var chalk = require('chalk');

/**
 * The serve action.
 * @param {boolean} w The watch flag
 * @param {boolean} watch The watch flag
 */
module.exports = function (_ref) {
  var w = _ref.w,
      watch = _ref.watch;

  bulbo.cli.liftoff('bulbo').then(function (_ref2) {
    var bulbo = _ref2.module;

    if (bulbo.isEmpty()) {
      bulbo.logger.log(chalk.red('Error: No asset defined'));

      process.exit(1);
    }

    if (w || watch) {
      bulbo.watchAndBuild();
    } else {
      bulbo.build();
    }
  });
};