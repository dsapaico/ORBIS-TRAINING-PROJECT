exclude: true

# Questions to answered in the slides

## What is considered a noise when test web page performance?

Popups, differed messages with animation..

## Which webpages/site you should be testing for performance?

test pages with considerable amount of visitors and which generate revenue.

# slides structure

overview/background -> define the problem -> measure -> analyse -> baseline? -> User Centric -> Lab
| |
v v
What? How? (Glossary) Google Big Query/Chrome UX report -> Histogram / Different personas/audeince
|
v
Retain data -> Influx/Graphit/prometoues

Demos

# points

# memes

![Measure everything](assets/keep-calm-and-measure-everything.svg)

> stay clams and measure everything

> no golden rule for web pages testing KPIs

---

exclude: true

# Talk Description

Ni mission is to reach the leads of the highest quality (high intent to preform an action) and direct them to the must relevant product/partner for them at the moment. In order to achieve that we should build the must informative, attractive comparison sites which is optimized for conversion (backed by A/B tests). Converting potential clients depends on a few factors:

- low bounce rate/fast page load/perceived page speed
- easy recognizable call to action
- relevancy

We serve dynamic pages for millions of users around the world, and we have to do it fast. Page load performance has a great effect on bounce rate and CTR, therefore a big monetary effect on our business KPIs.

We would concentrate on the first aspect, speed!
Or maybe better said... Our journey to speed, knowing how to measure, track, improve, and visualize.

After a research we started to understand that our measuring KPIs were not enough, and our research test groups were too small (Devices, network conditions, geo etc). All of these lead us to the project we're going to show you.

From running individual WebPageTest tests, to the realization that we must automate and track-everything. If performance was our religion than graphs and dashboards must be our church|synagogue|temple|masque.

So in order to have measure everything (~100,000 tests daily), we rolled our own private instances of WebPageTest.

Our modest try to track everything on MySQL, that ended as soon as we needed to take any statistical function a bit more complicated than AVG. Leading us to a new world of Time Series Databases and their statistical capabilities.

Our evaluation and choice between Graphite, InfluxDB, or Prometheus.

Therefore lead us to harnessed the power of _spoiler_ InfluxDB/Grafana to squeeze the most out of our data and create graphs, histogram, heatmaps and dashboard that show real insights.

---

exclude: true

# Kobi Kadosh

???

TODO

.pull-left.avatar[ ![Kobi's Avatar](https://www.gravatar.com/avatar/48e96b0a9a0b099c043593cd2630d155?s=200) ]

Kobi is a Tech Lead @Ni He Research, mentor and develop for XSite group.

He has worked in big companies and small startups. He developed CMSs, financial services and business application. He specialize in Web Development and He has 6 years of experience in the field. He is an avid advocate of good code practices and team communication solutions e.g. KISS, Clean Code, Slack, Github..

Previously He has experience working in Enterprise Software, FinTech, VC, Social media as Tech Lead & other key roles.

Recently he has discovered how amazing is VIM (thanks to the one and only @shniz), Introduce him to any cool plugins you got! He would appreciate it :heart:

Find him on Github [@wildcard](https://github.com/wildcard), twitter [@KobiKadosh](https://twitter.com/kobikadosh) and if you like PGP try Keybase [@kobi](https://keybase.io/kobi).

---

class: center

# Measuring and Improving Page Load Performance

<figure>

![response time are too tamn high](https://www.myloadtest.com/resources/meme-response-times-are-too-damn-high.png)

<figcaption>
the image is taken from [Performance Testing memes By Stuart Moncrieff](https://www.myloadtest.com/performance-testing-memes/)
</figcaption>
</figure>

---

class: primary, center, middle

# Some Background

1. ok

???

5min

---

1. first

--

2. ok

--

3. ok

---

## We have hundreds of websites

???

TODO: images of websites

---

## Serving dynamic pages (rule based)

???

A/B/C/D testing
Segmentation
Limited use of CDN for pages (not assets). Our serving ENV is regionaly deployed
TODO: show an example of test/rule

---

## We are optimized for first visits

???

a lot of are traffic are first time users

---

## speed is very important to us

???

user experience
abandon rate
google rank
=> $$$ big dollar effect

---

# history

???

5min

---

## our move from csr to ssr

???

- google hated JS rendererd pages (requires round trips for above the fold)
- csr was had performance problem on slow device
- we ended up serving page @about 100ms avg server time
- CTR improved but we exausted server side optimization

---

## focus on page load performance

???

- page load (event) was our key client performance metric
- used google page speed insights
- used webpagetest manually

Not sure we need this here

- page load event vs page load performance
- educate product/business about metrics and performance + giving

---

# why

???

5 min

---

## Lack of apropriate metrics

???

- we only relied on page load (event) we need to have a fine grained view of each part of the page load funnel
- no speed index. speed index require analizing video frames of the page loading. We didn't have a plan with enough credits in GTMetrix to perform tests in the scale that we want
- 3rd party scripts greatly affectd our load time and we wanted to see how do they affect speed index
  TODO: slides with 3rd party test results

---

## One source of truth

???

gtmetrix
when we

---

## We didn't test in constant conditions

???

- unthrottled speed
- same locations

## not enough volume

---

# idea :bulb:

???

5 min

---

- measure more

* track everything over time, enter time series db

* try to get more insights

---

# how

???

30 min

---

- lab vs user centric testing

- time series db
- decision time pro / cons
- influxDB
- prometheus
- graphite
- aggregations - zoom in & out - how to visualize
- Grafana
- best practices
- crictical path render
- font loading strategies
- google page speed insights / CrUX report
- lighthouse

---

# Future application

???

5min

---

- Link Performance KPIs to Business KPIs
- Integrate with CI/CD
- Benchmark against competitors
- optimize our design for speed
- measure if new technology overpreform our current tech
